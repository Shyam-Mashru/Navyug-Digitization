
<div id="login-container" class="form-container form-visible">
    <div class="text-center mb-6 md:mb-8">
        <h2 class="auth-heading font-bold text-slate-800">Welcome Back</h2>
        <p class="text-slate-500 mt-2 text-sm md:text-base">Please enter your details to sign in.</p>
    </div>
    <div class="flex bg-slate-100 rounded-lg p-1 mb-5 text-sm">
        <button class="auth-toggle-btn flex-1 p-2 rounded-lg font-medium bg-white shadow-sm text-sky-600 transition-colors duration-200" [class.bg-white]="loginToggle === 'email'" [class.shadow-sm]="loginToggle === 'email'" [class.text-sky-600]="loginToggle === 'email'" [class.text-slate-500]="loginToggle === 'mobile'" (click)="handleToggle('email')">Email</button>
        <button class="auth-toggle-btn flex-1 p-2 rounded-lg font-medium transition-colors duration-200" [class.bg-white]="loginToggle === 'mobile'" [class.shadow-sm]="loginToggle === 'mobile'" [class.text-sky-600]="loginToggle === 'mobile'" [class.text-slate-500]="loginToggle === 'email'" (click)="handleToggle('mobile')">Mobile</button>
    </div>
                    
    @if(loginToggle === 'email') {
        <form class="space-y-4" [formGroup] = "emailForm" (ngSubmit)="onSubmit('email')">
            <div class="relative">
                <input type="email" class="w-full pl-5 pr-4 py-2 border rounded-lg text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-500" placeholder="you@example.com" formControlName="email">
                @if (emailForm.get('email')?.invalid && (emailForm.get('email')?.dirty || emailForm.get('email')?.touched)) {
                    <div class="text-red-500 text-sm mt-1 ml-1">
                        @if(emailForm.get('email')?.errors?.['required']) {
                            <span>❗Email is required.</span>
                        }
                        @if(emailForm.get('email')?.errors?.['email']) {
                            <span>❗Please enter a valid email address.</span>
                        }
                        @if(emailForm.get('email')?.errors?.['maxlength']) {
                            <span>❗Email cannot exceed 50 characters.</span>
                        }
                    </div>
                }
            </div>
            <div class="relative">
                <input type="password" class="w-full pl-5 pr-4 py-2 border rounded-lg text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-500" placeholder="Enter password" formControlName="password">
                @if (emailForm.get('password')?.invalid && (emailForm.get('password')?.dirty || emailForm.get('password')?.touched)) {
                    <div class="text-red-500 text-sm mt-1 ml-1">
                        @if(emailForm.get('password')?.errors?.['required']) {
                            <span>❗Password is required.</span>
                        }
                    </div>
                }
            </div>
            <div class="flex justify-end">
                <a href="#" class="text-sm text-sky-600 hover:underline">Forgot password?</a>
            </div>
            <button type="submit" class="w-full py-2.5 text-white bg-sky-600 rounded-lg hover:bg-sky-700 font-semibold transition-colors duration-300">Sign In</button>
        </form>
    }
    @if(loginToggle=='mobile') {
        <form [formGroup]="mobileForm" (ngSubmit)="onSubmit('mobile')" class="space-y-4">
            <div class="relative">
                <input type="tel" formControlName="phone" placeholder="Mobile Number" class="w-full pl-5 pr-4 py-2 border rounded-lg text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-500"/>
                @if (mobileForm.get('phone')?.invalid && (mobileForm.get('phone')?.dirty || mobileForm.get('phone')?.touched)) {
                    <div class="text-red-500 text-sm mt-1 ml-1">
                        @if(mobileForm.get('phone')?.errors?.['required']) {
                            <span>❗Mobile number is required.</span>
                        }
                        @if(mobileForm.get('phone')?.errors?.['pattern']) {
                            <span>❗Please enter a valid 10-digit mobile number.</span>
                        }
                    </div>
                }
            </div>
            <div class="flex space-x-2">
                <input type="text" formControlName="otp" placeholder="Enter OTP" class="flex-1 px-4 py-2 border rounded-lg text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-500"/>
                <button type="button" (click)="sendOtp()" class="px-4 py-2 text-sm font-semibold text-sky-600 bg-sky-100 rounded-lg hover:bg-sky-200 transition-colors"> Send OTP</button>
            </div>
            @if (mobileForm.get('otp')?.invalid && mobileForm.get('phone')?.valid && (mobileForm.get('otp')?.dirty || mobileForm.get('otp')?.touched)) {
                <div class="text-red-500 text-sm mt-1 ml-1">
                    @if(mobileForm.get('otp')?.errors?.['required']) {
                        <span>❗OTP is required.</span>
                    }
                    @if(mobileForm.get('otp')?.errors?.['pattern']) {
                        <span>❗Please enter a valid 6-digit OTP.</span>
                    }
                </div>
            }
            <button type="submit" class="w-full py-2.5 text-white bg-sky-600 rounded-lg hover:bg-sky-700 font-semibold transition-colors duration-300">Sign In with OTP</button>
        </form>
    }
    <div class="flex items-center my-6">
        <div class="flex-grow border-t border-slate-300"></div>
        <span class="mx-4 text-xs text-slate-400 font-medium">OR</span>
        <div class="flex-grow border-t border-slate-300"></div>
    </div>

    <button class="w-full flex items-center justify-center py-2.5 border rounded-lg hover:bg-slate-50 transition-colors">
        <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
            <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path>
            <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path>
            <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"></path>
            <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C39.99,35.508,44,30.028,44,24C44,22.659,43.862,21.35,43.611,20.083z"></path>
        </svg>
        <span class="font-semibold text-slate-600 text-sm">Sign in with Google</span>
    </button>

    <p class="mt-8 text-sm text-center text-slate-500"> Don't have an account? 
        <a routerLink="/auth/register" id="show-register-link" class="font-semibold text-sky-600 hover:underline">Register</a>
    </p>
</div>